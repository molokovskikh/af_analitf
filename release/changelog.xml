<?xml version = "1.0" encoding = "windows-1251" standalone = "yes" ?>
<?xml-stylesheet href="changelog.xsl" type="text/xsl"?>

<ChangeLog>
 <ProductName>AnalitF</ProductName>
 <Description>Клиентское приложения для работы с базой АналитФАРМАЦИЯ</Description>
 <LastVersion>3.0.x.xx</LastVersion>

 <Version>
  <Number>3.0.x.xx</Number>
  <Date>2005.03.14</Date>
  <Notes>Обновлен механизм скачивания рекламы</Notes>

  <Improvement>Попытки повторного соединения при неудачном подключении вынесены в Indy.</Improvement>

  <Refactor>Метод TSOAPThroughHTTP.pas.Invoke возвращает уже TStrings с распарсенными параметрами</Refactor>

  <Bug>При возникновении фатальной ошибки при подключении к локальной базе не происходил останов приложения : заменил Application.Terminate на ExitProcess.</Bug>

  <Bug>Признак того, что работа с программой была завершена некорректно, выставляется по наличию файлу AnalitF.ldb.</Bug>

  <New>Добавил возможность многострочного выделения в таблице заявок. Теперь все операции можно проводить сразу на нескольких заявках.</New>

  <New>Добавил параметр "extend" для включения дополнительных пунктов в главное меню: Присоединить/Отсоединить внешние таблицы, Очистить базу.</New>

  <Refactor>Убрал неиспользуемый компонент HTTPRIO.</Refactor>

  <Refactor>Механизм загрузки 32-битных иконок теперь не требует переписывания TCustomImageList, используется подмена Handle.</Refactor>

  <Improvement>Изменен механизм скачивания рекламы: 
  	добавлен прогрессбар на форме обмена, 
  	при скачивании рекламы вызываются GetReclame и ReclameComplete,
  	в главной нитке обмена теперь не происходит ожидания окончания скачивания рекламы, она занимает распаковкой и импортированием,
  	при нажатии "Отмена" на форме Обмена в случае ожидания докачки рекламы отменяется только скачивание рекламы.
  </Improvement>

  <Refactor>Для подтверждения успешного обмена теперь используется метод MaxSynonymCodeV2 с передачей лог-файла обмена в качестве параметра.</Refactor>                      

 </Version>

 <Version>
  <Number>3.0.5.65</Number>
  <Date>2005.02.22</Date>

  <Bug>Введена задержка после установки Dial-Up соединения. Это связано с проблемами соединения на плохих линиях связи.</Bug>
  <Improvement>При работе с сервером соединения устанавливается один раз и при запросах используется существующее соединение.</Improvement>
  <Improvement>При ошибках связи с сервером производится повторная установка соединения (до 10 раз).</Improvement>
  <Remove>Убрал пункты меню: Присоединить/Отсоединить внешние таблицы, Очистить базу</Remove>


  <New>Изменение версии базы на 20: В таблицу Params добавил параметр RasSleep, задержка в секундах после установки соединения.
  </New>

 </Version>

 <Version>
  <Number>3.0.4.54</Number>
  <Date>2005.02.14</Date>

  <New>Убрал таймаут при получении данных и отправки подтверждения серверу.</New>
  <Bug>Исправил баг, связанный с куммулятивным обновлением. Теперь флаг куммулятивного обновления выставляется только в том случае, если полученны файлы по HTTP.</Bug>
  <New>Сделал сжатие и восстановление базы с показом формы.</New>
  <New>Сделал возможность удаления определенных позиций из заказа. При удалении всех позиций заказ удаляется автоматически.</New>
  <New>Теперь после получения прайса во время сжатия базы данные показывается окошко с анимацией.</New>
  <New>Добавлена поддержка ExternalOrders.dll: библиотека для формирование внешних заказов для ПРОТЕК</New>

  

  <New>Изменение версии базы на 17: Добавлен флаг Started в таблицу Params, который отвечает за то, что приложение было остановленно критически.
       В этом случае при старте программы происходит принудительное сжатие базы.
  </New>

  <New>Изменение версии базы на 18: Добавлено поле Protek к таблице PricesData, которое указывает на то, что для этого прайса могут быть сформированны заказы для ПРОТЕК.
       Это поле используется библиотекой ExternalOrders.
  </New>

  <New>Изменение версии базы на 19: Поправил запросы на выборку данных из ассортимента: теперь отображаются только те товары и формы выпуска, по которым есть предложения.
  </New>

 </Version>

</ChangeLog>