<?xml version = "1.0" encoding = "windows-1251" standalone = "yes" ?>
<?xml-stylesheet href="changelog.xsl" type="text/xsl"?>

<ChangeLog>
 <ProductName>AnalitF</ProductName>
 <Description>Клиентское приложения для работы с базой АналитФАРМАЦИЯ</Description>

 <Version>
  <VersionNumber>
   <Major>3</Major>
   <Minor>0</Minor>
   <Release>51</Release>
   <Build>86</Build>
  </VersionNumber>
  <Date>2005.06.20</Date>
  <Notes>Небольшие изменения перед переходом на другой тип базы.</Notes>

  <New>При запросе данных передается служебнуя информация о версиях модулей JET и MDAC.</New>

  <Bug>Исправил ошибку в разборе параметров, получаемых от сервера, из-за чего не отражалось окно сообщения клиентам.</Bug>

  <New>Включил блокировку AccessViolation в программе. Это связано с ошибкой при открытии формы конфигурации. Теперь AV - логируется в файл.</New>

  <Bug>Исправил ошибку использования ActionList в Main и ChildForm.</Bug>

  <Bug>Убрал везде использование NewWares. Из-за NewWares могли не отображаться каталоги наименований и форм выпусков</Bug>

  <New>Вставил проверку на существование файла базы.</New>

  <New>Добавил свойство к компоненту TooughDBGrid, которое позволяет изменять интервал отображения окна поиска. Выставил интерал у таблицы "Заявка поставщику"(dbgCore) = 2500 (мс).</New>

  <New>При изменении галочки "Отправить" в форме "Заказов" обнояляется состояние "Отправить заказы"</New>

  <New>Убрал кнопку "Перевести в отправленные"</New>

  <New>При удалении позиции в "Сводном заказе" вместо сообщения "Удалить значение" отображается "Удалить позицию".</New>

  <New>При запуске программы проверяются версии JET и MDAC. Если они не удовлетворяют минимальным требованиям, то запуск программы прекращается.
       Минимальная версия JET(Msjet40.dll) : 4.0.8015.0  Минимальная версия MDAC(MSDASQL.DLL) : 2.53.6200.0</New>

  <New>При подключении через прокси выставляется параметр ProxyConnection = keep-alive</New>

  <New>Если клиента работает по DialUp и в процессе загрузке возникают сокетные ошибки, то разрыва DialUp-соединения не происходит.</New>

  <Bug>При аварийном завершении программы оставался недокачанный файл, который при следующем запуске пытались докачать. 
       Теперь эти файлы (архивы) при запуске удаляются.</Bug>

  <Bug>В окне заказы возникала проблема при редактировании "Сообщения поставщику" на несуществующем заказе.</Bug>

  <Bug>Исправил ошибку с обработкой EIdConnClosedGracefully при подтверждение обновления. 
       При возникновении такой ошибки запрос повторно отправляется на сервер.</Bug>

  <New>Изменение версии базы на 23: Убрал везде использование NewWares.</New>

 </Version>

 <Version>
  <VersionNumber>
   <Major>3</Major>
   <Minor>0</Minor>
   <Release>35</Release>
   <Build>80</Build>
  </VersionNumber>
  <Date>2005.04.08</Date>
  <Notes>Добавлена поддержка электронных накладных.</Notes>


  <New>Добавлена поддержка электронных накладных.</New>

  <Improvement>Изменен алгоритм автоматического обновления.</Improvement>

  <Improvement>Форма ожидания отображается в центре экрана.</Improvement>

  <New>Добавлена поддержка папки Exports, получаемая при обновлении.</New>

  <Improvement>При смене имени пользователя блокируются все операции, кроме обновления, и удаляются неотправленные заказы.</Improvement>

  <Refactor>Из модуля Exchange удалены лишние модули и добавлено логирование URI.</Refactor>

  <Bug>Статическая загрузка библиотеки RASAPI32 приводила к ошибке в случае неустановленной службы удаленного доступа. Теперь библиотека загружается динамически.</Bug>

  <Refactor>В формах с рекламой изменилось расположение WebBrowser, чтобы его легко можно было отключить.</Refactor>

  <Refactor>Добавлен код, выгружающий библиотеку Integr.dll.</Refactor>

  <Improvement>Добавлен вертикальный скроллбар в блок "Оперативная информация" на форма "Прайс-листы поставщиков".</Improvement>

  <Change>В форме "Заявка поставщику" теперь отображаются все столбцы по умолчанию.</Change>

  <Improvement>В формах "Список препаратов" и "Сводный прайс-лист" происходит автоматическое отключении рекламы, если данные таблиц отображаются менее 80%.</Improvement>

  <Bug>В главной форме исправлена ошибка с установкой фокуса.</Bug>

  <Change>В главной форме убрана галочка "Новые поступления".</Change>

  <New>При обновлении серверу отправляется информация о версиях используемых библиотек.</New>

  <Improvement>Библиотека собрана с динамически загружаемыми пакетами.</Improvement>
  
  <New>Изменение версии базы на 21: Добавлены таблицы WayBillHead, WayBillList 
  	и виды для работы с ними WayBillHeadInsert, WayBillHeadShow, WayBillHeadShowCurrent, WayBillListInsert, WayBillListShow.
  </New>

  <New>Изменение версии базы на 22: В таблицу Params добавил параметр HTTPNameChanged, признак того, что имя авторизации было изменено.
  </New>

 </Version>

 <Version>
  <VersionNumber>
   <Major>3</Major>
   <Minor>0</Minor>
   <Release>19</Release>
   <Build>76</Build>
  </VersionNumber>
  <Date>2005.03.21</Date>
  <Notes>Последний билд, в котором исполняемый файл поставляется как самодостаточное приложение.</Notes>

  <Improvement>Название "Реклама" изменено на "Информационный блок".</Improvement>

  <Bug>Если в архиве информационного блока содержалось более одного файла, то распаковка не происходила.</Bug>

  <Improvement>При переводе заявок из "Отправленных" в "Текущие" производится сброс выделения в таблице.</Improvement>

 </Version>

 <Version>
  <VersionNumber>
   <Major>3</Major>
   <Minor>0</Minor>
   <Release>16</Release>
   <Build>75</Build>
  </VersionNumber>
  <Date>2005.03.14</Date>
  <Notes>Обновлен механизм скачивания рекламы</Notes>

  <Improvement>Попытки повторного соединения при неудачном подключении вынесены в Indy.</Improvement>

  <Refactor>Метод TSOAPThroughHTTP.pas.Invoke возвращает уже TStrings с распарсенными параметрами</Refactor>

  <Bug>При возникновении фатальной ошибки при подключении к локальной базе не происходил останов приложения : заменил Application.Terminate на ExitProcess.</Bug>

  <Bug>Признак того, что работа с программой была завершена некорректно, выставляется по наличию файлу AnalitF.ldb.</Bug>

  <New>Добавил возможность многострочного выделения в таблице заявок. Теперь все операции можно проводить сразу на нескольких заявках.</New>

  <New>Добавил параметр "extend" для включения дополнительных пунктов в главное меню: Присоединить/Отсоединить внешние таблицы, Очистить базу.</New>

  <Refactor>Убрал неиспользуемый компонент HTTPRIO.</Refactor>

  <Refactor>Механизм загрузки 32-битных иконок теперь не требует переписывания TCustomImageList, используется подмена Handle.</Refactor>

  <Improvement>Изменен механизм скачивания рекламы: 
  	добавлен прогрессбар на форме обмена, 
  	при скачивании рекламы вызываются GetReclame и ReclameComplete,
  	в главной нитке обмена теперь не происходит ожидания окончания скачивания рекламы, она занимает распаковкой и импортированием,
  	при нажатии "Отмена" на форме Обмена в случае ожидания докачки рекламы отменяется только скачивание рекламы.
  </Improvement>

  <Refactor>Для подтверждения успешного обмена теперь используется метод MaxSynonymCodeV2 с передачей лог-файла обмена в качестве параметра.</Refactor>                      

 </Version>

 <Version>
  <VersionNumber>
   <Major>3</Major>
   <Minor>0</Minor>
   <Release>5</Release>
   <Build>65</Build>
  </VersionNumber>
  <Date>2005.02.22</Date>

  <Bug>Введена задержка после установки Dial-Up соединения. Это связано с проблемами соединения на плохих линиях связи.</Bug>
  <Improvement>При работе с сервером соединения устанавливается один раз и при запросах используется существующее соединение.</Improvement>
  <Improvement>При ошибках связи с сервером производится повторная установка соединения (до 10 раз).</Improvement>
  <Remove>Убрал пункты меню: Присоединить/Отсоединить внешние таблицы, Очистить базу</Remove>


  <New>Изменение версии базы на 20: В таблицу Params добавил параметр RasSleep, задержка в секундах после установки соединения.
  </New>

 </Version>

 <Version>
  <VersionNumber>
   <Major>3</Major>
   <Minor>0</Minor>
   <Release>4</Release>
   <Build>54</Build>
  </VersionNumber>
  <Date>2005.02.14</Date>

  <New>Убрал таймаут при получении данных и отправки подтверждения серверу.</New>
  <Bug>Исправил баг, связанный с куммулятивным обновлением. Теперь флаг куммулятивного обновления выставляется только в том случае, если полученны файлы по HTTP.</Bug>
  <New>Сделал сжатие и восстановление базы с показом формы.</New>
  <New>Сделал возможность удаления определенных позиций из заказа. При удалении всех позиций заказ удаляется автоматически.</New>
  <New>Теперь после получения прайса во время сжатия базы данные показывается окошко с анимацией.</New>
  <New>Добавлена поддержка ExternalOrders.dll: библиотека для формирование внешних заказов для ПРОТЕК</New>

  

  <New>Изменение версии базы на 17: Добавлен флаг Started в таблицу Params, который отвечает за то, что приложение было остановленно критически.
       В этом случае при старте программы происходит принудительное сжатие базы.
  </New>

  <New>Изменение версии базы на 18: Добавлено поле Protek к таблице PricesData, которое указывает на то, что для этого прайса могут быть сформированны заказы для ПРОТЕК.
       Это поле используется библиотекой ExternalOrders.
  </New>

  <New>Изменение версии базы на 19: Поправил запросы на выборку данных из ассортимента: теперь отображаются только те товары и формы выпуска, по которым есть предложения.
  </New>

 </Version>

</ChangeLog>